'use strict';Object.defineProperty(exports,'__esModule',{value:true***REMOVED***);var _typeof=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(obj){return typeof obj***REMOVED***:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj***REMOVED***;exports.default=parse;var _util=require('./util');var util=_interopRequireWildcard(_util);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj***REMOVED***else{var newObj={***REMOVED***;if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]***REMOVED******REMOVED***newObj.default=obj;return newObj***REMOVED******REMOVED***var source=void 0;var parseState=void 0;var stack=void 0;var pos=void 0;var line=void 0;var column=void 0;var token=void 0;var key=void 0;var root=void 0;function parse(text,reviver){source=String(text);parseState='start';stack=[];pos=0;line=1;column=0;token=undefined;key=undefined;root=undefined;do{token=lex();parseStates[parseState]()***REMOVED***while(token.type!=='eof');if(typeof reviver==='function'){return internalize({'':root***REMOVED***,'',reviver)***REMOVED***return root***REMOVED***function internalize(holder,name,reviver){var value=holder[name];if(value!=null&&(typeof value==='undefined'?'undefined':_typeof(value))==='object'){if(Array.isArray(value)){for(var i=0;i<value.length;i++){var _key=String(i);var replacement=internalize(value,_key,reviver);if(replacement===undefined){delete value[_key]***REMOVED***else{Object.defineProperty(value,_key,{value:replacement,writable:true,enumerable:true,configurable:true***REMOVED***)***REMOVED******REMOVED******REMOVED***else{for(var _key2 in value){var _replacement=internalize(value,_key2,reviver);if(_replacement===undefined){delete value[_key2]***REMOVED***else{Object.defineProperty(value,_key2,{value:_replacement,writable:true,enumerable:true,configurable:true***REMOVED***)***REMOVED******REMOVED******REMOVED******REMOVED***return reviver.call(holder,name,value)***REMOVED***var lexState=void 0;var buffer=void 0;var doubleQuote=void 0;var _sign=void 0;var c=void 0;function lex(){lexState='default';buffer='';doubleQuote=false;_sign=1;for(;;){c=peek();var _token=lexStates[lexState]();if(_token){return _token***REMOVED******REMOVED******REMOVED***function peek(){if(source[pos]){return String.fromCodePoint(source.codePointAt(pos))***REMOVED******REMOVED***function read(){var c=peek();if(c==='\n'){line++;column=0***REMOVED***else if(c){column+=c.length***REMOVED***else{column++***REMOVED***if(c){pos+=c.length***REMOVED***return c***REMOVED***var lexStates={default:function _default(){switch(c){case'\t':case'\x0B':case'\f':case' ':case'\xA0':case'\uFEFF':case'\n':case'\r':case'\u2028':case'\u2029':read();return;case'/':read();lexState='comment';return;case undefined:read();return newToken('eof');***REMOVED***if(util.isSpaceSeparator(c)){read();return***REMOVED***return lexStates[parseState]()***REMOVED***,comment:function comment(){switch(c){case'*':read();lexState='multiLineComment';return;case'/':read();lexState='singleLineComment';return;***REMOVED***throw invalidChar(read())***REMOVED***,multiLineComment:function multiLineComment(){switch(c){case'*':read();lexState='multiLineCommentAsterisk';return;case undefined:throw invalidChar(read());***REMOVED***read()***REMOVED***,multiLineCommentAsterisk:function multiLineCommentAsterisk(){switch(c){case'*':read();return;case'/':read();lexState='default';return;case undefined:throw invalidChar(read());***REMOVED***read();lexState='multiLineComment'***REMOVED***,singleLineComment:function singleLineComment(){switch(c){case'\n':case'\r':case'\u2028':case'\u2029':read();lexState='default';return;case undefined:read();return newToken('eof');***REMOVED***read()***REMOVED***,value:function value(){switch(c){case'{':case'[':return newToken('punctuator',read());case'n':read();literal('ull');return newToken('null',null);case't':read();literal('rue');return newToken('boolean',true);case'f':read();literal('alse');return newToken('boolean',false);case'-':case'+':if(read()==='-'){_sign=-1***REMOVED***lexState='sign';return;case'.':buffer=read();lexState='decimalPointLeading';return;case'0':buffer=read();lexState='zero';return;case'1':case'2':case'3':case'4':case'5':case'6':case'7':case'8':case'9':buffer=read();lexState='decimalInteger';return;case'I':read();literal('nfinity');return newToken('numeric',Infinity);case'N':read();literal('aN');return newToken('numeric',NaN);case'"':case'\'':doubleQuote=read()==='"';buffer='';lexState='string';return;***REMOVED***throw invalidChar(read())***REMOVED***,identifierNameStartEscape:function identifierNameStartEscape(){if(c!=='u'){throw invalidChar(read())***REMOVED***read();var u=unicodeEscape();switch(u){case'$':case'_':break;default:if(!util.isIdStartChar(u)){throw invalidIdentifier()***REMOVED***break;***REMOVED***buffer+=u;lexState='identifierName'***REMOVED***,identifierName:function identifierName(){switch(c){case'$':case'_':case'\u200C':case'\u200D':buffer+=read();return;case'\\':read();lexState='identifierNameEscape';return;***REMOVED***if(util.isIdContinueChar(c)){buffer+=read();return***REMOVED***return newToken('identifier',buffer)***REMOVED***,identifierNameEscape:function identifierNameEscape(){if(c!=='u'){throw invalidChar(read())***REMOVED***read();var u=unicodeEscape();switch(u){case'$':case'_':case'\u200C':case'\u200D':break;default:if(!util.isIdContinueChar(u)){throw invalidIdentifier()***REMOVED***break;***REMOVED***buffer+=u;lexState='identifierName'***REMOVED***,sign:function sign(){switch(c){case'.':buffer=read();lexState='decimalPointLeading';return;case'0':buffer=read();lexState='zero';return;case'1':case'2':case'3':case'4':case'5':case'6':case'7':case'8':case'9':buffer=read();lexState='decimalInteger';return;case'I':read();literal('nfinity');return newToken('numeric',_sign*Infinity);case'N':read();literal('aN');return newToken('numeric',NaN);***REMOVED***throw invalidChar(read())***REMOVED***,zero:function zero(){switch(c){case'.':buffer+=read();lexState='decimalPoint';return;case'e':case'E':buffer+=read();lexState='decimalExponent';return;case'x':case'X':buffer+=read();lexState='hexadecimal';return;***REMOVED***return newToken('numeric',_sign*0)***REMOVED***,decimalInteger:function decimalInteger(){switch(c){case'.':buffer+=read();lexState='decimalPoint';return;case'e':case'E':buffer+=read();lexState='decimalExponent';return;***REMOVED***if(util.isDigit(c)){buffer+=read();return***REMOVED***return newToken('numeric',_sign*Number(buffer))***REMOVED***,decimalPointLeading:function decimalPointLeading(){if(util.isDigit(c)){buffer+=read();lexState='decimalFraction';return***REMOVED***throw invalidChar(read())***REMOVED***,decimalPoint:function decimalPoint(){switch(c){case'e':case'E':buffer+=read();lexState='decimalExponent';return;***REMOVED***if(util.isDigit(c)){buffer+=read();lexState='decimalFraction';return***REMOVED***return newToken('numeric',_sign*Number(buffer))***REMOVED***,decimalFraction:function decimalFraction(){switch(c){case'e':case'E':buffer+=read();lexState='decimalExponent';return;***REMOVED***if(util.isDigit(c)){buffer+=read();return***REMOVED***return newToken('numeric',_sign*Number(buffer))***REMOVED***,decimalExponent:function decimalExponent(){switch(c){case'+':case'-':buffer+=read();lexState='decimalExponentSign';return;***REMOVED***if(util.isDigit(c)){buffer+=read();lexState='decimalExponentInteger';return***REMOVED***throw invalidChar(read())***REMOVED***,decimalExponentSign:function decimalExponentSign(){if(util.isDigit(c)){buffer+=read();lexState='decimalExponentInteger';return***REMOVED***throw invalidChar(read())***REMOVED***,decimalExponentInteger:function decimalExponentInteger(){if(util.isDigit(c)){buffer+=read();return***REMOVED***return newToken('numeric',_sign*Number(buffer))***REMOVED***,hexadecimal:function hexadecimal(){if(util.isHexDigit(c)){buffer+=read();lexState='hexadecimalInteger';return***REMOVED***throw invalidChar(read())***REMOVED***,hexadecimalInteger:function hexadecimalInteger(){if(util.isHexDigit(c)){buffer+=read();return***REMOVED***return newToken('numeric',_sign*Number(buffer))***REMOVED***,string:function string(){switch(c){case'\\':read();buffer+=escape();return;case'"':if(doubleQuote){read();return newToken('string',buffer)***REMOVED***buffer+=read();return;case'\'':if(!doubleQuote){read();return newToken('string',buffer)***REMOVED***buffer+=read();return;case'\n':case'\r':throw invalidChar(read());case'\u2028':case'\u2029':separatorChar(c);break;case undefined:throw invalidChar(read());***REMOVED***buffer+=read()***REMOVED***,start:function start(){switch(c){case'{':case'[':return newToken('punctuator',read());***REMOVED***lexState='value'***REMOVED***,beforePropertyName:function beforePropertyName(){switch(c){case'$':case'_':buffer=read();lexState='identifierName';return;case'\\':read();lexState='identifierNameStartEscape';return;case'***REMOVED***':return newToken('punctuator',read());case'"':case'\'':doubleQuote=read()==='"';lexState='string';return;***REMOVED***if(util.isIdStartChar(c)){buffer+=read();lexState='identifierName';return***REMOVED***throw invalidChar(read())***REMOVED***,afterPropertyName:function afterPropertyName(){if(c===':'){return newToken('punctuator',read())***REMOVED***throw invalidChar(read())***REMOVED***,beforePropertyValue:function beforePropertyValue(){lexState='value'***REMOVED***,afterPropertyValue:function afterPropertyValue(){switch(c){case',':case'***REMOVED***':return newToken('punctuator',read());***REMOVED***throw invalidChar(read())***REMOVED***,beforeArrayValue:function beforeArrayValue(){if(c===']'){return newToken('punctuator',read())***REMOVED***lexState='value'***REMOVED***,afterArrayValue:function afterArrayValue(){switch(c){case',':case']':return newToken('punctuator',read());***REMOVED***throw invalidChar(read())***REMOVED***,end:function end(){throw invalidChar(read())***REMOVED******REMOVED***;function newToken(type,value){return{type:type,value:value,line:line,column:column***REMOVED******REMOVED***function literal(s){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=s[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _c=_step.value;var p=peek();if(p!==_c){throw invalidChar(read())***REMOVED***read()***REMOVED******REMOVED***catch(err){_didIteratorError=true;_iteratorError=err***REMOVED***finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()***REMOVED******REMOVED***finally{if(_didIteratorError){throw _iteratorError***REMOVED******REMOVED******REMOVED******REMOVED***function escape(){var c=peek();switch(c){case'b':read();return'\b';case'f':read();return'\f';case'n':read();return'\n';case'r':read();return'\r';case't':read();return'\t';case'v':read();return'\x0B';case'0':read();if(util.isDigit(peek())){throw invalidChar(read())***REMOVED***return'\0';case'x':read();return hexEscape();case'u':read();return unicodeEscape();case'\n':case'\u2028':case'\u2029':read();return'';case'\r':read();if(peek()==='\n'){read()***REMOVED***return'';case'1':case'2':case'3':case'4':case'5':case'6':case'7':case'8':case'9':throw invalidChar(read());case undefined:throw invalidChar(read());***REMOVED***return read()***REMOVED***function hexEscape(){var buffer='';var c=peek();if(!util.isHexDigit(c)){throw invalidChar(read())***REMOVED***buffer+=read();c=peek();if(!util.isHexDigit(c)){throw invalidChar(read())***REMOVED***buffer+=read();return String.fromCodePoint(parseInt(buffer,16))***REMOVED***function unicodeEscape(){var buffer='';var count=4;while(count-->0){var _c2=peek();if(!util.isHexDigit(_c2)){throw invalidChar(read())***REMOVED***buffer+=read()***REMOVED***return String.fromCodePoint(parseInt(buffer,16))***REMOVED***var parseStates={start:function start(){if(token.type==='eof'){throw invalidEOF()***REMOVED***push()***REMOVED***,beforePropertyName:function beforePropertyName(){switch(token.type){case'identifier':case'string':key=token.value;parseState='afterPropertyName';return;case'punctuator':pop();return;case'eof':throw invalidEOF();***REMOVED******REMOVED***,afterPropertyName:function afterPropertyName(){if(token.type==='eof'){throw invalidEOF()***REMOVED***parseState='beforePropertyValue'***REMOVED***,beforePropertyValue:function beforePropertyValue(){if(token.type==='eof'){throw invalidEOF()***REMOVED***push()***REMOVED***,beforeArrayValue:function beforeArrayValue(){if(token.type==='eof'){throw invalidEOF()***REMOVED***if(token.type==='punctuator'&&token.value===']'){pop();return***REMOVED***push()***REMOVED***,afterPropertyValue:function afterPropertyValue(){if(token.type==='eof'){throw invalidEOF()***REMOVED***switch(token.value){case',':parseState='beforePropertyName';return;case'***REMOVED***':pop();***REMOVED******REMOVED***,afterArrayValue:function afterArrayValue(){if(token.type==='eof'){throw invalidEOF()***REMOVED***switch(token.value){case',':parseState='beforeArrayValue';return;case']':pop();***REMOVED******REMOVED***,end:function end(){***REMOVED******REMOVED***;function push(){var value=void 0;switch(token.type){case'punctuator':switch(token.value){case'{':value={***REMOVED***;break;case'[':value=[];break;***REMOVED***break;case'null':case'boolean':case'numeric':case'string':value=token.value;break;***REMOVED***if(root===undefined){root=value***REMOVED***else{var parent=stack[stack.length-1];if(Array.isArray(parent)){parent.push(value)***REMOVED***else{Object.defineProperty(parent,key,{value:value,writable:true,enumerable:true,configurable:true***REMOVED***)***REMOVED******REMOVED***if(value!==null&&(typeof value==='undefined'?'undefined':_typeof(value))==='object'){stack.push(value);if(Array.isArray(value)){parseState='beforeArrayValue'***REMOVED***else{parseState='beforePropertyName'***REMOVED******REMOVED***else{var current=stack[stack.length-1];if(current==null){parseState='end'***REMOVED***else if(Array.isArray(current)){parseState='afterArrayValue'***REMOVED***else{parseState='afterPropertyValue'***REMOVED******REMOVED******REMOVED***function pop(){stack.pop();var current=stack[stack.length-1];if(current==null){parseState='end'***REMOVED***else if(Array.isArray(current)){parseState='afterArrayValue'***REMOVED***else{parseState='afterPropertyValue'***REMOVED******REMOVED***function invalidChar(c){if(c===undefined){return syntaxError('JSON5: invalid end of input at '+line+':'+column)***REMOVED***return syntaxError('JSON5: invalid character \''+formatChar(c)+'\' at '+line+':'+column)***REMOVED***function invalidEOF(){return syntaxError('JSON5: invalid end of input at '+line+':'+column)***REMOVED***function invalidIdentifier(){column-=5;return syntaxError('JSON5: invalid identifier character at '+line+':'+column)***REMOVED***function separatorChar(c){console.warn('JSON5: \''+c+'\' is not valid ECMAScript; consider escaping')***REMOVED***function formatChar(c){var replacements={'\'':'\\\'','"':'\\"','\\':'\\\\','\b':'\\b','\f':'\\f','\n':'\\n','\r':'\\r','\t':'\\t','\x0B':'\\v','\0':'\\0','\u2028':'\\u2028','\u2029':'\\u2029'***REMOVED***;if(replacements[c]){return replacements[c]***REMOVED***if(c<' '){var hexString=c.charCodeAt(0).toString(16);return'\\x'+('00'+hexString).substring(hexString.length)***REMOVED***return c***REMOVED***function syntaxError(message){var err=new SyntaxError(message);err.lineNumber=line;err.columnNumber=column;return err***REMOVED***module.exports=exports['default'];
{{# def.definitions ***REMOVED******REMOVED***
{{# def.errors ***REMOVED******REMOVED***
{{# def.setupKeyword ***REMOVED******REMOVED***
{{# def.setupNextLevel ***REMOVED******REMOVED***

{{
  var $currentBaseId = $it.baseId
    , $prevValid = 'prevValid' + $lvl
    , $passingSchemas = 'passingSchemas' + $lvl;
***REMOVED******REMOVED***

var {{=$errs***REMOVED******REMOVED*** = errors
  , {{=$prevValid***REMOVED******REMOVED*** = false
  , {{=$valid***REMOVED******REMOVED*** = false
  , {{=$passingSchemas***REMOVED******REMOVED*** = null;

{{# def.setCompositeRule ***REMOVED******REMOVED***

{{~ $schema:$sch:$i ***REMOVED******REMOVED***
  {{? {{# def.nonEmptySchema:$sch ***REMOVED******REMOVED*** ***REMOVED******REMOVED***
    {{
      $it.schema = $sch;
      $it.schemaPath = $schemaPath + '[' + $i + ']';
      $it.errSchemaPath = $errSchemaPath + '/' + $i;
    ***REMOVED******REMOVED***

    {{# def.insertSubschemaCode ***REMOVED******REMOVED***
  {{??***REMOVED******REMOVED***
    var {{=$nextValid***REMOVED******REMOVED*** = true;
  {{?***REMOVED******REMOVED***

  {{? $i ***REMOVED******REMOVED***
    if ({{=$nextValid***REMOVED******REMOVED*** && {{=$prevValid***REMOVED******REMOVED***) {
      {{=$valid***REMOVED******REMOVED*** = false;
      {{=$passingSchemas***REMOVED******REMOVED*** = [{{=$passingSchemas***REMOVED******REMOVED***, {{=$i***REMOVED******REMOVED***];
    ***REMOVED*** else {
    {{ $closingBraces += '***REMOVED***'; ***REMOVED******REMOVED***
  {{?***REMOVED******REMOVED***

    if ({{=$nextValid***REMOVED******REMOVED***) {
      {{=$valid***REMOVED******REMOVED*** = {{=$prevValid***REMOVED******REMOVED*** = true;
      {{=$passingSchemas***REMOVED******REMOVED*** = {{=$i***REMOVED******REMOVED***;
    ***REMOVED***
{{~***REMOVED******REMOVED***

{{# def.resetCompositeRule ***REMOVED******REMOVED***

{{= $closingBraces ***REMOVED******REMOVED***

if (!{{=$valid***REMOVED******REMOVED***) {
  {{# def.extraError:'oneOf' ***REMOVED******REMOVED***
***REMOVED*** else {
  {{# def.resetErrors ***REMOVED******REMOVED***
{{? it.opts.allErrors ***REMOVED******REMOVED*** ***REMOVED*** {{?***REMOVED******REMOVED***

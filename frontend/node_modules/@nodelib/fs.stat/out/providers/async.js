"use strict";
Object.defineProperty(exports, "__esModule", { value: true ***REMOVED***);
exports.read = void 0;
function read(path, settings, callback) {
    settings.fs.lstat(path, (lstatError, lstat) => {
        if (lstatError !== null) {
            callFailureCallback(callback, lstatError);
            return;
        ***REMOVED***
        if (!lstat.isSymbolicLink() || !settings.followSymbolicLink) {
            callSuccessCallback(callback, lstat);
            return;
        ***REMOVED***
        settings.fs.stat(path, (statError, stat) => {
            if (statError !== null) {
                if (settings.throwErrorOnBrokenSymbolicLink) {
                    callFailureCallback(callback, statError);
                    return;
                ***REMOVED***
                callSuccessCallback(callback, lstat);
                return;
            ***REMOVED***
            if (settings.markSymbolicLink) {
                stat.isSymbolicLink = () => true;
            ***REMOVED***
            callSuccessCallback(callback, stat);
        ***REMOVED***);
    ***REMOVED***);
***REMOVED***
exports.read = read;
function callFailureCallback(callback, error) {
    callback(error);
***REMOVED***
function callSuccessCallback(callback, result) {
    callback(null, result);
***REMOVED***

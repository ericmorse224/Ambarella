import type { Filter, RequestHandler, Options ***REMOVED*** from './types';
export declare class HttpProxyMiddleware {
    private logger;
    private config;
    private wsInternalSubscribed;
    private serverOnCloseSubscribed;
    private proxyOptions;
    private proxy;
    private pathRewriter;
    constructor(context: Filter | Options, opts?: Options);
    middleware: RequestHandler;
    private catchUpgradeRequest;
    private handleUpgrade;
    /**
     * Determine whether request should be proxied.
     *
     * @private
     * @param  {String***REMOVED*** context [description]
     * @param  {Object***REMOVED*** req     [description]
     * @return {Boolean***REMOVED***
     */
    private shouldProxy;
    /**
     * Apply option.router and option.pathRewrite
     * Order matters:
     *    Router uses original path for routing;
     *    NOT the modified path, after it has been rewritten by pathRewrite
     * @param {Object***REMOVED*** req
     * @return {Object***REMOVED*** proxy options
     */
    private prepareProxyRequest;
    private applyRouter;
    private applyPathRewrite;
    private logError;
***REMOVED***

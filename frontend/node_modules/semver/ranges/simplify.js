// given a set of versions and a range, create a "simplified" range
// that includes the same versions that the original range does
// If the original range is shorter than the simplified one, return that.
const satisfies = require('../functions/satisfies.js')
const compare = require('../functions/compare.js')
module.exports = (versions, range, options) => {
  const set = []
  let first = null
  let prev = null
  const v = versions.sort((a, b) => compare(a, b, options))
  for (const version of v) {
    const included = satisfies(version, range, options)
    if (included) {
      prev = version
      if (!first) {
        first = version
      ***REMOVED***
    ***REMOVED*** else {
      if (prev) {
        set.push([first, prev])
      ***REMOVED***
      prev = null
      first = null
    ***REMOVED***
  ***REMOVED***
  if (first) {
    set.push([first, null])
  ***REMOVED***

  const ranges = []
  for (const [min, max] of set) {
    if (min === max) {
      ranges.push(min)
    ***REMOVED*** else if (!max && min === v[0]) {
      ranges.push('*')
    ***REMOVED*** else if (!max) {
      ranges.push(`>=${min***REMOVED***`)
    ***REMOVED*** else if (min === v[0]) {
      ranges.push(`<=${max***REMOVED***`)
    ***REMOVED*** else {
      ranges.push(`${min***REMOVED*** - ${max***REMOVED***`)
    ***REMOVED***
  ***REMOVED***
  const simplified = ranges.join(' || ')
  const original = typeof range.raw === 'string' ? range.raw : String(range)
  return simplified.length < original.length ? simplified : range
***REMOVED***

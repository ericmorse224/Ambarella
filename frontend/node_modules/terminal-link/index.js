'use strict';
const ansiEscapes = require('ansi-escapes');
const supportsHyperlinks = require('supports-hyperlinks');

const terminalLink = (text, url, {target = 'stdout', ...options***REMOVED*** = {***REMOVED***) => {
	if (!supportsHyperlinks[target]) {
		// If the fallback has been explicitly disabled, don't modify the text itself.
		if (options.fallback === false) {
			return text;
		***REMOVED***

		return typeof options.fallback === 'function' ? options.fallback(text, url) : `${text***REMOVED*** (\u200B${url***REMOVED***\u200B)`;
	***REMOVED***

	return ansiEscapes.link(text, url);
***REMOVED***;

module.exports = (text, url, options = {***REMOVED***) => terminalLink(text, url, options);

module.exports.stderr = (text, url, options = {***REMOVED***) => terminalLink(text, url, {target: 'stderr', ...options***REMOVED***);

module.exports.isSupported = supportsHyperlinks.stdout;
module.exports.stderr.isSupported = supportsHyperlinks.stderr;

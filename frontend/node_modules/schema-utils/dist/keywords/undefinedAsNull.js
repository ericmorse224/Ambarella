"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
***REMOVED***);
exports.default = void 0;
/** @typedef {import("ajv").default***REMOVED*** Ajv */
/** @typedef {import("ajv").SchemaValidateFunction***REMOVED*** SchemaValidateFunction */
/** @typedef {import("ajv").AnySchemaObject***REMOVED*** AnySchemaObject */
/** @typedef {import("ajv").ValidateFunction***REMOVED*** ValidateFunction */

/**
 *
 * @param {Ajv***REMOVED*** ajv
 * @returns {Ajv***REMOVED***
 */
function addUndefinedAsNullKeyword(ajv) {
  ajv.addKeyword({
    keyword: "undefinedAsNull",
    before: "enum",
    modifying: true,
    /** @type {SchemaValidateFunction***REMOVED*** */
    validate(kwVal, data, metadata, dataCxt) {
      if (kwVal && dataCxt && metadata && typeof metadata.enum !== "undefined") {
        const idx = dataCxt.parentDataProperty;
        if (typeof dataCxt.parentData[idx] === "undefined") {
          // eslint-disable-next-line no-param-reassign
          dataCxt.parentData[dataCxt.parentDataProperty] = null;
        ***REMOVED***
      ***REMOVED***
      return true;
    ***REMOVED***
  ***REMOVED***);
  return ajv;
***REMOVED***
var _default = exports.default = addUndefinedAsNullKeyword;
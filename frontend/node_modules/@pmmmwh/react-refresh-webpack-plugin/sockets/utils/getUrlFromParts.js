/**
 * Create a valid URL from parsed URL parts.
 * @param {import('./getSocketUrlParts').SocketUrlParts***REMOVED*** urlParts The parsed URL parts.
 * @param {import('./getWDSMetadata').WDSMetaObj***REMOVED*** [metadata] The parsed WDS metadata object.
 * @returns {string***REMOVED*** The generated URL.
 */
function urlFromParts(urlParts, metadata) {
  if (typeof metadata === 'undefined') {
    metadata = {***REMOVED***;
  ***REMOVED***

  let fullProtocol = 'http:';
  if (urlParts.protocol) {
    fullProtocol = urlParts.protocol;
  ***REMOVED***
  if (metadata.enforceWs) {
    fullProtocol = fullProtocol.replace(/^(?:http|.+-extension|file)/i, 'ws');
  ***REMOVED***

  fullProtocol = fullProtocol + '//';

  let fullHost = urlParts.hostname;
  if (urlParts.auth) {
    const fullAuth = urlParts.auth.split(':').map(encodeURIComponent).join(':') + '@';
    fullHost = fullAuth + fullHost;
  ***REMOVED***
  if (urlParts.port) {
    fullHost = fullHost + ':' + urlParts.port;
  ***REMOVED***

  const url = new URL(urlParts.pathname, fullProtocol + fullHost);
  return url.href;
***REMOVED***

module.exports = urlFromParts;

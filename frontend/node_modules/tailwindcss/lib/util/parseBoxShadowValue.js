"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
***REMOVED***);
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    ***REMOVED***);
***REMOVED***
_export(exports, {
    parseBoxShadowValue: function() {
        return parseBoxShadowValue;
    ***REMOVED***,
    formatBoxShadowValue: function() {
        return formatBoxShadowValue;
    ***REMOVED***
***REMOVED***);
const _splitAtTopLevelOnly = require("./splitAtTopLevelOnly");
let KEYWORDS = new Set([
    "inset",
    "inherit",
    "initial",
    "revert",
    "unset"
]);
let SPACE = /\ +(?![^(]*\))/g // Similar to the one above, but with spaces instead.
;
let LENGTH = /^-?(\d+|\.\d+)(.*?)$/g;
function parseBoxShadowValue(input) {
    let shadows = (0, _splitAtTopLevelOnly.splitAtTopLevelOnly)(input, ",");
    return shadows.map((shadow)=>{
        let value = shadow.trim();
        let result = {
            raw: value
        ***REMOVED***;
        let parts = value.split(SPACE);
        let seen = new Set();
        for (let part of parts){
            // Reset index, since the regex is stateful.
            LENGTH.lastIndex = 0;
            // Keyword
            if (!seen.has("KEYWORD") && KEYWORDS.has(part)) {
                result.keyword = part;
                seen.add("KEYWORD");
            ***REMOVED*** else if (LENGTH.test(part)) {
                if (!seen.has("X")) {
                    result.x = part;
                    seen.add("X");
                ***REMOVED*** else if (!seen.has("Y")) {
                    result.y = part;
                    seen.add("Y");
                ***REMOVED*** else if (!seen.has("BLUR")) {
                    result.blur = part;
                    seen.add("BLUR");
                ***REMOVED*** else if (!seen.has("SPREAD")) {
                    result.spread = part;
                    seen.add("SPREAD");
                ***REMOVED***
            ***REMOVED*** else {
                if (!result.color) {
                    result.color = part;
                ***REMOVED*** else {
                    if (!result.unknown) result.unknown = [];
                    result.unknown.push(part);
                ***REMOVED***
            ***REMOVED***
        ***REMOVED***
        // Check if valid
        result.valid = result.x !== undefined && result.y !== undefined;
        return result;
    ***REMOVED***);
***REMOVED***
function formatBoxShadowValue(shadows) {
    return shadows.map((shadow)=>{
        if (!shadow.valid) {
            return shadow.raw;
        ***REMOVED***
        return [
            shadow.keyword,
            shadow.x,
            shadow.y,
            shadow.blur,
            shadow.spread,
            shadow.color
        ].filter(Boolean).join(" ");
    ***REMOVED***).join(", ");
***REMOVED***

/**
 * @fileoverview Ensure autocomplete attribute is correct.
 * @author Wilco Fiers
 */

// -----------------------------------------------------------------------------
// Requirements
// -----------------------------------------------------------------------------

import { RuleTester ***REMOVED*** from 'eslint';
import parserOptionsMapper from '../../__util__/parserOptionsMapper';
import { axeFailMessage ***REMOVED*** from '../../__util__/axeMapping';
import parsers from '../../__util__/helpers/parsers';
import rule from '../../../src/rules/autocomplete-valid';

// -----------------------------------------------------------------------------
// Tests
// -----------------------------------------------------------------------------

const ruleTester = new RuleTester();

const invalidAutocomplete = [{
  message: axeFailMessage('autocomplete-valid'),
  type: 'JSXOpeningElement',
***REMOVED***];

const inappropriateAutocomplete = [{
  message: axeFailMessage('autocomplete-appropriate'),
  type: 'JSXOpeningElement',
***REMOVED***];

const componentsSettings = {
  'jsx-a11y': {
    components: {
      Input: 'input',
    ***REMOVED***,
  ***REMOVED***,
***REMOVED***;

ruleTester.run('autocomplete-valid', rule, {
  valid: parsers.all([].concat(
    // INAPPLICABLE
    { code: '<input type="text" />;' ***REMOVED***,
    // // PASSED AUTOCOMPLETE
    { code: '<input type="text" autocomplete="name" />;' ***REMOVED***,
    { code: '<input type="text" autocomplete="" />;' ***REMOVED***,
    { code: '<input type="text" autocomplete="off" />;' ***REMOVED***,
    { code: '<input type="text" autocomplete="on" />;' ***REMOVED***,
    { code: '<input type="text" autocomplete="billing family-name" />;' ***REMOVED***,
    { code: '<input type="text" autocomplete="section-blue shipping street-address" />;' ***REMOVED***,
    { code: '<input type="text" autocomplete="section-somewhere shipping work email" />;' ***REMOVED***,
    { code: '<input type="text" autocomplete />;' ***REMOVED***,
    { code: '<input type="text" autocomplete={autocompl***REMOVED*** />;' ***REMOVED***,
    { code: '<input type="text" autocomplete={autocompl || "name"***REMOVED*** />;' ***REMOVED***,
    { code: '<input type="text" autocomplete={autocompl || "foo"***REMOVED*** />;' ***REMOVED***,
    { code: '<Foo autocomplete="bar"></Foo>;' ***REMOVED***,
    { code: '<input type={isEmail ? "email" : "text"***REMOVED*** autocomplete="none" />;' ***REMOVED***,
    { code: '<Input type="text" autocomplete="name" />', settings: componentsSettings ***REMOVED***,
    { code: '<Input type="text" autocomplete="baz" />' ***REMOVED***,

    // PASSED "autocomplete-appropriate"
    // see also: https://github.com/dequelabs/axe-core/issues/2912
    { code: '<input type="date" autocomplete="email" />;', errors: inappropriateAutocomplete ***REMOVED***,
    { code: '<input type="number" autocomplete="url" />;', errors: inappropriateAutocomplete ***REMOVED***,
    { code: '<input type="month" autocomplete="tel" />;', errors: inappropriateAutocomplete ***REMOVED***,
    { code: '<Foo type="month" autocomplete="tel"></Foo>;', errors: inappropriateAutocomplete, options: [{ inputComponents: ['Foo'] ***REMOVED***] ***REMOVED***,
  )).map(parserOptionsMapper),
  invalid: parsers.all([].concat(
    // FAILED "autocomplete-valid"
    { code: '<input type="text" autocomplete="foo" />;', errors: invalidAutocomplete ***REMOVED***,
    { code: '<input type="text" autocomplete="name invalid" />;', errors: invalidAutocomplete ***REMOVED***,
    { code: '<input type="text" autocomplete="invalid name" />;', errors: invalidAutocomplete ***REMOVED***,
    { code: '<input type="text" autocomplete="home url" />;', errors: invalidAutocomplete ***REMOVED***,
    { code: '<Bar autocomplete="baz"></Bar>;', errors: invalidAutocomplete, options: [{ inputComponents: ['Bar'] ***REMOVED***] ***REMOVED***,
    { code: '<Input type="text" autocomplete="baz" />', errors: invalidAutocomplete, settings: componentsSettings ***REMOVED***,
  )).map(parserOptionsMapper),
***REMOVED***);

/**
 * @fileoverview Enforce img alt attribute does not have the word image, picture, or photo.
 * @author Ethan Cohen
 */

// -----------------------------------------------------------------------------
// Requirements
// -----------------------------------------------------------------------------

import { RuleTester ***REMOVED*** from 'eslint';
import semver from 'semver';
import { version as eslintVersion ***REMOVED*** from 'eslint/package.json';
import parserOptionsMapper from '../../__util__/parserOptionsMapper';
import parsers from '../../__util__/helpers/parsers';
import rule from '../../../src/rules/img-redundant-alt';

// -----------------------------------------------------------------------------
// Tests
// -----------------------------------------------------------------------------

const array = [{
  components: ['Image'],
  words: ['Word1', 'Word2'],
***REMOVED***];

const componentsSettings = {
  'jsx-a11y': {
    components: {
      Image: 'img',
    ***REMOVED***,
  ***REMOVED***,
***REMOVED***;

const ruleTester = new RuleTester();

const expectedError = {
  message: 'Redundant alt attribute. Screen-readers already announce `img` tags as an image. You don’t need to use the words `image`, `photo,` or `picture` (or any specified custom words) in the alt prop.',
  type: 'JSXOpeningElement',
***REMOVED***;

ruleTester.run('img-redundant-alt', rule, {
  valid: parsers.all([].concat(
    { code: '<img alt="foo" />;' ***REMOVED***,
    { code: '<img alt="picture of me taking a photo of an image" aria-hidden />' ***REMOVED***,
    { code: '<img aria-hidden alt="photo of image" />' ***REMOVED***,
    { code: '<img ALt="foo" />;' ***REMOVED***,
    { code: '<img {...this.props***REMOVED*** alt="foo" />' ***REMOVED***,
    { code: '<img {...this.props***REMOVED*** alt={"foo"***REMOVED*** />' ***REMOVED***,
    { code: '<img {...this.props***REMOVED*** alt={alt***REMOVED*** />' ***REMOVED***,
    { code: '<a />' ***REMOVED***,
    { code: '<img />' ***REMOVED***,
    { code: '<IMG />' ***REMOVED***,
    { code: '<img alt={undefined***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={`this should pass for ${now***REMOVED***`***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={`this should pass for ${photo***REMOVED***`***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={`this should pass for ${image***REMOVED***`***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={`this should pass for ${picture***REMOVED***`***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={`${photo***REMOVED***`***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={`${image***REMOVED***`***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={`${picture***REMOVED***`***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={"undefined"***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={() => {***REMOVED******REMOVED*** />' ***REMOVED***,
    { code: '<img alt={function(e){***REMOVED******REMOVED*** />' ***REMOVED***,
    { code: '<img aria-hidden={false***REMOVED*** alt="Doing cool things." />' ***REMOVED***,
    { code: '<UX.Layout>test</UX.Layout>' ***REMOVED***,
    { code: '<img alt />' ***REMOVED***,
    { code: '<img alt={imageAlt***REMOVED*** />' ***REMOVED***,
    { code: '<img alt={imageAlt.name***REMOVED*** />' ***REMOVED***,
    semver.satisfies(eslintVersion, '>= 6') ? [
      { code: '<img alt={imageAlt?.name***REMOVED*** />', languageOptions: { ecmaVersion: 2020 ***REMOVED*** ***REMOVED***,
      { code: '<img alt="Doing cool things" aria-hidden={foo?.bar***REMOVED***/>', languageOptions: { ecmaVersion: 2020 ***REMOVED*** ***REMOVED***,
    ] : [],
    { code: '<img alt="Photography" />;' ***REMOVED***,
    { code: '<img alt="ImageMagick" />;' ***REMOVED***,
    { code: '<Image alt="Photo of a friend" />' ***REMOVED***,
    { code: '<Image alt="Foo" />', settings: componentsSettings ***REMOVED***,
    { code: '<img alt="画像" />', options: [{ words: ['イメージ'] ***REMOVED***] ***REMOVED***,
  )).map(parserOptionsMapper),
  invalid: parsers.all([].concat(
    { code: '<img alt="Photo of friend." />;', errors: [expectedError] ***REMOVED***,
    { code: '<img alt="Picture of friend." />;', errors: [expectedError] ***REMOVED***,
    { code: '<img alt="Image of friend." />;', errors: [expectedError] ***REMOVED***,
    { code: '<img alt="PhOtO of friend." />;', errors: [expectedError] ***REMOVED***,
    { code: '<img alt={"photo"***REMOVED*** />;', errors: [expectedError] ***REMOVED***,
    { code: '<img alt="piCTUre of friend." />;', errors: [expectedError] ***REMOVED***,
    { code: '<img alt="imAGE of friend." />;', errors: [expectedError] ***REMOVED***,
    {
      code: '<img alt="photo of cool person" aria-hidden={false***REMOVED*** />',
      errors: [expectedError],
    ***REMOVED***,
    {
      code: '<img alt="picture of cool person" aria-hidden={false***REMOVED*** />',
      errors: [expectedError],
    ***REMOVED***,
    {
      code: '<img alt="image of cool person" aria-hidden={false***REMOVED*** />',
      errors: [expectedError],
    ***REMOVED***,
    { code: '<img alt="photo" {...this.props***REMOVED*** />', errors: [expectedError] ***REMOVED***,
    { code: '<img alt="image" {...this.props***REMOVED*** />', errors: [expectedError] ***REMOVED***,
    { code: '<img alt="picture" {...this.props***REMOVED*** />', errors: [expectedError] ***REMOVED***,
    {
      code: '<img alt={`picture doing ${things***REMOVED***`***REMOVED*** {...this.props***REMOVED*** />',
      errors: [expectedError],
    ***REMOVED***,
    {
      code: '<img alt={`photo doing ${things***REMOVED***`***REMOVED*** {...this.props***REMOVED*** />',
      errors: [expectedError],
    ***REMOVED***,
    {
      code: '<img alt={`image doing ${things***REMOVED***`***REMOVED*** {...this.props***REMOVED*** />',
      errors: [expectedError],
    ***REMOVED***,
    {
      code: '<img alt={`picture doing ${picture***REMOVED***`***REMOVED*** {...this.props***REMOVED*** />',
      errors: [expectedError],
    ***REMOVED***,
    {
      code: '<img alt={`photo doing ${photo***REMOVED***`***REMOVED*** {...this.props***REMOVED*** />',
      errors: [expectedError],
    ***REMOVED***,
    {
      code: '<img alt={`image doing ${image***REMOVED***`***REMOVED*** {...this.props***REMOVED*** />',
      errors: [expectedError],
    ***REMOVED***,
    { code: '<Image alt="Photo of a friend" />', errors: [expectedError], settings: componentsSettings ***REMOVED***,

    // TESTS FOR ARRAY OPTION TESTS
    { code: '<img alt="Word1" />;', options: array, errors: [expectedError] ***REMOVED***,
    { code: '<img alt="Word2" />;', options: array, errors: [expectedError] ***REMOVED***,
    { code: '<Image alt="Word1" />;', options: array, errors: [expectedError] ***REMOVED***,
    { code: '<Image alt="Word2" />;', options: array, errors: [expectedError] ***REMOVED***,

    { code: '<img alt="イメージ" />', options: [{ words: ['イメージ'] ***REMOVED***], errors: [expectedError] ***REMOVED***,
    { code: '<img alt="イメージです" />', options: [{ words: ['イメージ'] ***REMOVED***], errors: [expectedError] ***REMOVED***,
  )).map(parserOptionsMapper),
***REMOVED***);

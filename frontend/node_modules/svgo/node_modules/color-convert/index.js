var conversions = require('./conversions');
var route = require('./route');

var convert = {***REMOVED***;

var models = Object.keys(conversions);

function wrapRaw(fn) {
	var wrappedFn = function (args) {
		if (args === undefined || args === null) {
			return args;
		***REMOVED***

		if (arguments.length > 1) {
			args = Array.prototype.slice.call(arguments);
		***REMOVED***

		return fn(args);
	***REMOVED***;

	// preserve .conversion property if there is one
	if ('conversion' in fn) {
		wrappedFn.conversion = fn.conversion;
	***REMOVED***

	return wrappedFn;
***REMOVED***

function wrapRounded(fn) {
	var wrappedFn = function (args) {
		if (args === undefined || args === null) {
			return args;
		***REMOVED***

		if (arguments.length > 1) {
			args = Array.prototype.slice.call(arguments);
		***REMOVED***

		var result = fn(args);

		// we're assuming the result is an array here.
		// see notice in conversions.js; don't use box types
		// in conversion functions.
		if (typeof result === 'object') {
			for (var len = result.length, i = 0; i < len; i++) {
				result[i] = Math.round(result[i]);
			***REMOVED***
		***REMOVED***

		return result;
	***REMOVED***;

	// preserve .conversion property if there is one
	if ('conversion' in fn) {
		wrappedFn.conversion = fn.conversion;
	***REMOVED***

	return wrappedFn;
***REMOVED***

models.forEach(function (fromModel) {
	convert[fromModel] = {***REMOVED***;

	Object.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels***REMOVED***);
	Object.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels***REMOVED***);

	var routes = route(fromModel);
	var routeModels = Object.keys(routes);

	routeModels.forEach(function (toModel) {
		var fn = routes[toModel];

		convert[fromModel][toModel] = wrapRounded(fn);
		convert[fromModel][toModel].raw = wrapRaw(fn);
	***REMOVED***);
***REMOVED***);

module.exports = convert;

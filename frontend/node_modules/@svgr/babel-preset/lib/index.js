"use strict";

exports.__esModule = true;
exports.default = void 0;

var _babelPluginAddJsxAttribute = _interopRequireDefault(require("@svgr/babel-plugin-add-jsx-attribute"));

var _babelPluginRemoveJsxAttribute = _interopRequireDefault(require("@svgr/babel-plugin-remove-jsx-attribute"));

var _babelPluginRemoveJsxEmptyExpression = _interopRequireDefault(require("@svgr/babel-plugin-remove-jsx-empty-expression"));

var _babelPluginReplaceJsxAttributeValue = _interopRequireDefault(require("@svgr/babel-plugin-replace-jsx-attribute-value"));

var _babelPluginSvgDynamicTitle = _interopRequireDefault(require("@svgr/babel-plugin-svg-dynamic-title"));

var _babelPluginSvgEmDimensions = _interopRequireDefault(require("@svgr/babel-plugin-svg-em-dimensions"));

var _babelPluginTransformReactNativeSvg = _interopRequireDefault(require("@svgr/babel-plugin-transform-react-native-svg"));

var _babelPluginTransformSvgComponent = _interopRequireDefault(require("@svgr/babel-plugin-transform-svg-component"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj ***REMOVED***; ***REMOVED***

function getAttributeValue(value) {
  const literal = typeof value === 'string' && value.startsWith('{') && value.endsWith('***REMOVED***');
  return {
    value: literal ? value.slice(1, -1) : value,
    literal
  ***REMOVED***;
***REMOVED***

function propsToAttributes(props) {
  return Object.keys(props).map(name => {
    const {
      literal,
      value
    ***REMOVED*** = getAttributeValue(props[name]);
    return {
      name,
      literal,
      value
    ***REMOVED***;
  ***REMOVED***);
***REMOVED***

function replaceMapToValues(replaceMap) {
  return Object.keys(replaceMap).map(value => {
    const {
      literal,
      value: newValue
    ***REMOVED*** = getAttributeValue(replaceMap[value]);
    return {
      value,
      newValue,
      literal
    ***REMOVED***;
  ***REMOVED***);
***REMOVED***

const plugin = (api, opts) => {
  let toRemoveAttributes = ['version'];
  let toAddAttributes = [];

  if (opts.svgProps) {
    toAddAttributes = [...toAddAttributes, ...propsToAttributes(opts.svgProps)];
  ***REMOVED***

  if (opts.ref) {
    toAddAttributes = [...toAddAttributes, {
      name: 'ref',
      value: 'svgRef',
      literal: true
    ***REMOVED***];
  ***REMOVED***

  if (opts.titleProp) {
    toAddAttributes = [...toAddAttributes, {
      name: 'aria-labelledby',
      value: 'titleId',
      literal: true
    ***REMOVED***];
  ***REMOVED***

  if (opts.expandProps) {
    toAddAttributes = [...toAddAttributes, {
      name: 'props',
      spread: true,
      position: opts.expandProps
    ***REMOVED***];
  ***REMOVED***

  if (!opts.dimensions) {
    toRemoveAttributes = [...toRemoveAttributes, 'width', 'height'];
  ***REMOVED***

  const plugins = [[_babelPluginTransformSvgComponent.default, opts], ...(opts.icon && opts.dimensions ? [_babelPluginSvgEmDimensions.default] : []), [_babelPluginRemoveJsxAttribute.default, {
    elements: ['svg', 'Svg'],
    attributes: toRemoveAttributes
  ***REMOVED***], [_babelPluginAddJsxAttribute.default, {
    elements: ['svg', 'Svg'],
    attributes: toAddAttributes
  ***REMOVED***], _babelPluginRemoveJsxEmptyExpression.default];

  if (opts.replaceAttrValues) {
    plugins.push([_babelPluginReplaceJsxAttributeValue.default, {
      values: replaceMapToValues(opts.replaceAttrValues)
    ***REMOVED***]);
  ***REMOVED***

  if (opts.titleProp) {
    plugins.push(_babelPluginSvgDynamicTitle.default);
  ***REMOVED***

  if (opts.native) {
    if (opts.native.expo) {
      plugins.push([_babelPluginTransformReactNativeSvg.default, opts.native]);
    ***REMOVED*** else {
      plugins.push(_babelPluginTransformReactNativeSvg.default);
    ***REMOVED***
  ***REMOVED***

  return {
    plugins
  ***REMOVED***;
***REMOVED***;

var _default = plugin;
exports.default = _default;
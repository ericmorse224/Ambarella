'use strict';

/** @typedef {`$${import('.').InternalSlot***REMOVED***`***REMOVED*** SaltedInternalSlot */
/** @typedef {{ [k in SaltedInternalSlot]?: unknown ***REMOVED******REMOVED*** SlotsObject */

var hasOwn = require('hasown');
/** @type {import('side-channel').Channel<object, SlotsObject>***REMOVED*** */
var channel = require('side-channel')();

var $TypeError = require('es-errors/type');

/** @type {import('.')***REMOVED*** */
var SLOT = {
	assert: function (O, slot) {
		if (!O || (typeof O !== 'object' && typeof O !== 'function')) {
			throw new $TypeError('`O` is not an object');
		***REMOVED***
		if (typeof slot !== 'string') {
			throw new $TypeError('`slot` must be a string');
		***REMOVED***
		channel.assert(O);
		if (!SLOT.has(O, slot)) {
			throw new $TypeError('`' + slot + '` is not present on `O`');
		***REMOVED***
	***REMOVED***,
	get: function (O, slot) {
		if (!O || (typeof O !== 'object' && typeof O !== 'function')) {
			throw new $TypeError('`O` is not an object');
		***REMOVED***
		if (typeof slot !== 'string') {
			throw new $TypeError('`slot` must be a string');
		***REMOVED***
		var slots = channel.get(O);
		// eslint-disable-next-line no-extra-parens
		return slots && slots[/** @type {SaltedInternalSlot***REMOVED*** */ ('$' + slot)];
	***REMOVED***,
	has: function (O, slot) {
		if (!O || (typeof O !== 'object' && typeof O !== 'function')) {
			throw new $TypeError('`O` is not an object');
		***REMOVED***
		if (typeof slot !== 'string') {
			throw new $TypeError('`slot` must be a string');
		***REMOVED***
		var slots = channel.get(O);
		// eslint-disable-next-line no-extra-parens
		return !!slots && hasOwn(slots, /** @type {SaltedInternalSlot***REMOVED*** */ ('$' + slot));
	***REMOVED***,
	set: function (O, slot, V) {
		if (!O || (typeof O !== 'object' && typeof O !== 'function')) {
			throw new $TypeError('`O` is not an object');
		***REMOVED***
		if (typeof slot !== 'string') {
			throw new $TypeError('`slot` must be a string');
		***REMOVED***
		var slots = channel.get(O);
		if (!slots) {
			slots = {***REMOVED***;
			channel.set(O, slots);
		***REMOVED***
		// eslint-disable-next-line no-extra-parens
		slots[/** @type {SaltedInternalSlot***REMOVED*** */ ('$' + slot)] = V;
	***REMOVED***
***REMOVED***;

if (Object.freeze) {
	Object.freeze(SLOT);
***REMOVED***

module.exports = SLOT;

# ARIA Query

![CI](https://github.com/A11yance/aria-query/workflows/CI/badge.svg)

Programmatic access to the [WAI-ARIA 1.2 Roles Model](https://www.w3.org/TR/wai-aria-1.2/#roles).
This package tracks the W3C Recommendation (last update: 6 June 2023).

CDN URL: <https://unpkg.com/aria-query>

## Building the `src/etc` files

The files under `src/etc` are generated by the `breakUpAriaJSON` script.

To change them, edit the file `scripts/roles.json` then run:

```bash
node ./scripts/breakUpAriaJSON.js
git add scripts/roles.json src/etc
```

It should work with Node version 6.11.2 or later.

## Utilities

### Interface

These methods are available on each export from the module. The typing here in the documentation is pseudo-typed. Each export will have its own specific types for each method signature.

```javascript
{|
  entries: () => Array<$Item>,
  get: (key: $Key) => ?$Value,
  has: (key: $Key) => boolean,
  keys: () => Array<$Key>,
  values: () => Array<$Value>,
|***REMOVED***;
```

### Roles

```javascript
import { roles ***REMOVED*** from 'aria-query';
```

A map of role names to the role definition. For example:

```javascript
let alertRole = roles.get('alert');
/**
 * Value of alertRole
 * {
 *   "requiredProps": {***REMOVED***,
 *   "props": {
 *     "aria-atomic": "true",
 *     "aria-busy": null,
 *     "aria-controls": null,
 *     "aria-current": null,
 *     "aria-describedby": null,
 *     "aria-details": null,
 *     "aria-disabled": null,
 *     "aria-dropeffect": null,
 *     "aria-errormessage": null,
 *     "aria-expanded": null,
 *     "aria-flowto": null,
 *     "aria-grabbed": null,
 *     "aria-haspopup": null,
 *     "aria-hidden": null,
 *     "aria-invalid": null,
 *     "aria-keyshortcuts": null,
 *     "aria-label": null,
 *     "aria-labelledby": null,
 *     "aria-live": "assertive",
 *     "aria-owns": null,
 *     "aria-relevant": null,
 *     "aria-roledescription": null
 *   ***REMOVED***,
 *   "abstract": false,
 *   "childrenPresentational": false,
 *   "baseConcepts": [],
 *   "relatedConcepts": [ {
 *     "module": "XForms",
 *     "concept": {
 *       "name": "alert"
 *     ***REMOVED***
 *   ***REMOVED***],
 *   "superClass": [["roletype", "structure", "section"]]
 * ***REMOVED***
```

### Elements to Roles

```javascript
import { elementRoles ***REMOVED*** from 'aria-query';
```

HTML Elements with inherent roles are mapped to those roles. In the case of an element like `<input>`, the element often requires a `type` attribute to map to an ARIA role.

```javascript
[
  [ '{"name": "article"***REMOVED***', [ 'article' ] ],
  [ '{"name": "button"***REMOVED***', [ 'button' ] ],
  [ '{"name": "td"***REMOVED***', [ 'cell', 'gridcell' ] ],
  [ '{"name": "input", "attributes": [ {"name": "type", "value": "checkbox"***REMOVED***] ***REMOVED***', [ 'checkbox' ] ],
  [ '{"name": "th"***REMOVED***', [ 'columnheader' ] ],
  [ '{"name": "select"***REMOVED***', [ 'combobox', 'listbox' ] ],
  [ '{"name": "menuitem"***REMOVED***', [ 'command', 'menuitem' ] ],
  [ '{"name": "dd"***REMOVED***', [ 'definition' ] ],
  [ '{"name": "figure"***REMOVED***', [ 'figure' ] ],
  [ '{"name": "form"***REMOVED***', [ 'form' ] ],
  [ '{"name": "table"***REMOVED***', [ 'grid', 'table' ] ],
  [ '{"name": "fieldset"***REMOVED***', [ 'group' ] ],
  [ '{"name": "h1"***REMOVED***', [ 'heading' ] ],
  [ '{"name": "h2"***REMOVED***', [ 'heading' ] ],
  [ '{"name": "h3"***REMOVED***', [ 'heading' ] ],
  [ '{"name": "h4"***REMOVED***', [ 'heading' ] ],
  [ '{"name": "h5"***REMOVED***', [ 'heading' ] ],
  [ '{"name": "h6"***REMOVED***', [ 'heading' ] ],
  [ '{"name": "img"***REMOVED***', [ 'img' ] ],
  [ '{"name": "a"***REMOVED***', [ 'link' ] ],
  [ '{"name": "link"***REMOVED***', [ 'link' ] ],
  [ '{"name": "ol"***REMOVED***', [ 'list' ] ],
  [ '{"name": "ul"***REMOVED***', [ 'list' ] ],
  [ '{"name": "li"***REMOVED***', [ 'listitem' ] ],
  [ '{"name": "nav"***REMOVED***', [ 'navigation' ] ],
  [ '{"name": "option"***REMOVED***', [ 'option' ] ],
  [ '{"name": "input", "attributes": [ {"name": "type", "value": "radio"***REMOVED***] ***REMOVED***', [ 'radio' ] ],
  [ '{"name": "frame"***REMOVED***', [ 'region' ] ],
  [ '{"name": "rel"***REMOVED***', [ 'roletype' ] ],
  [ '{"name": "tr"***REMOVED***', [ 'row' ] ],
  [ '{"name": "tbody"***REMOVED***', [ 'rowgroup' ] ],
  [ '{"name": "tfoot"***REMOVED***', [ 'rowgroup' ] ],
  [ '{"name": "thead"***REMOVED***', [ 'rowgroup' ] ],
  [ '{"name": "th", "attributes": [ {"name": "scope", "value": "row"***REMOVED***] ***REMOVED***', [ 'rowheader' ] ],
  [ '{"name": "input", "attributes": [ {"name": "type", "value": "search"***REMOVED***] ***REMOVED***', [ 'searchbox' ] ],
  [ '{"name": "hr"***REMOVED***', [ 'separator' ] ],
  [ '{"name": "dt"***REMOVED***', [ 'term' ] ],
  [ '{"name": "dfn"***REMOVED***', [ 'term' ] ],
  [ '{"name": "textarea"***REMOVED***', [ 'textbox' ] ],
  [ '{"name": "input", "attributes": [ {"name": "type", "value": "text"***REMOVED***] ***REMOVED***', [ 'textbox' ] ],
]
```

The map of elements to roles is keyed by an HTML concept. An HTML concept corresponds to the `baseConcepts` and `relatedConcepts` of an ARIA role. Concepts exist in the context of a `module`: HTML, XForms, Dublin Core, for example.  The concept representation is an object literal with a name property (the element name) and an optional attributes array.

The roles are provided in a [Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set).

### Role to element

```javascript
import { roleElements ***REMOVED*** from 'aria-query';
```

ARIA roles are mapped to the HTML Elements with the same inherent role. Some roles, such as `columnheader` are only mapped to an HTML element that expresses specific attributes. In the case of `<input>`, the element often requires a `type` attribute to map to an ARIA role.

```javascript
[
  [ 'article', [ {"name": "article"***REMOVED*** ] ],
  [ 'button', [ {"name": "button"***REMOVED*** ] ],
  [ 'cell', [ {"name": "td"***REMOVED*** ] ],
  [ 'checkbox', [ {"name": "input", "attributes": [ {"name": "type", "value": "checkbox"***REMOVED***] ***REMOVED*** ] ],
  [ 'columnheader', [ {"name": "th"***REMOVED*** ] ],
  [ 'combobox', [ {"name": "select"***REMOVED*** ] ],
  [ 'command', [ {"name": "menuitem"***REMOVED*** ] ],
  [ 'definition', [ {"name": "dd"***REMOVED***', '{"name": "dfn"***REMOVED*** ] ],
  [ 'figure', [ {"name": "figure"***REMOVED*** ] ],
  [ 'form', [ {"name": "form"***REMOVED*** ] ],
  [ 'grid', [ {"name": "table"***REMOVED*** ] ],
  [ 'gridcell', [ {"name": "td"***REMOVED*** ] ],
  [ 'group', [ {"name": "fieldset"***REMOVED*** ] ],
  [ 'heading', [ {"name": "h1"***REMOVED***', '{"name": "h2"***REMOVED***', '{"name": "h3"***REMOVED***', '{"name": "h4"***REMOVED***',  '{"name": "h5"***REMOVED***', '{"name": "h6"***REMOVED*** ] ],
  [ 'img', [ {"name": "img"***REMOVED*** ] ],
  [ 'link', [ {"name": "a"***REMOVED***', '{"name": "link"***REMOVED*** ] ],
  [ 'list', [ {"name": "ol"***REMOVED***', '{"name": "ul"***REMOVED*** ] ],
  [ 'listbox', [ {"name": "select"***REMOVED*** ] ],
  [ 'listitem', [ {"name": "li"***REMOVED*** ] ],
  [ 'menuitem', [ {"name": "menuitem"***REMOVED*** ] ],
  [ 'navigation', [ {"name": "nav"***REMOVED*** ] ],
  [ 'option', [ {"name": "option"***REMOVED*** ] ],
  [ 'radio', [ {"name": "input", "attributes": [ {"name": "type", "value": "radio"***REMOVED***] ***REMOVED*** ] ],
  [ 'region', [ {"name": "frame"***REMOVED*** ] ],
  [ 'roletype', [ {"name": "rel"***REMOVED*** ] ],
  [ 'row', [ {"name": "tr"***REMOVED*** ] ],
  [ 'rowgroup', [ {"name": "tbody"***REMOVED***', '{"name": "tfoot"***REMOVED***', '{"name": "thead"***REMOVED*** ] ],
  [ 'rowheader', [ {"name": "th", "attributes": [ {"name": "scope", "value": "row"***REMOVED***] ***REMOVED***, {"name": "th", "attributes": [ {"name": "scope", "value": "rowgroup"***REMOVED***] ***REMOVED*** ] ],
  [ 'searchbox', [ {"name": "input", "attributes": [ {"name": "type", "value": "search"***REMOVED***] ***REMOVED*** ] ],
  [ 'separator', [ {"name": "hr"***REMOVED*** ] ],
  [ 'table', [ {"name": "table"***REMOVED*** ] ],
  [ 'term', [ {"name": "dt"***REMOVED*** ] ],
  [ 'textbox', [ {"name": "textarea"***REMOVED***', '{"name": "input", "attributes": [ {"name": "type", "value": "text"***REMOVED***] ***REMOVED*** ] ],
]
```

## License

Copyright (c) 2021 A11yance

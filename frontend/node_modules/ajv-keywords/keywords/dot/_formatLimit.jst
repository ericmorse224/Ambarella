{{# def.definitions ***REMOVED******REMOVED***
{{# def.errors ***REMOVED******REMOVED***
{{# def.setupKeyword ***REMOVED******REMOVED***

var {{=$valid***REMOVED******REMOVED*** = undefined;

{{## def.skipFormatLimit:
  {{=$valid***REMOVED******REMOVED*** = true;
  {{ return out; ***REMOVED******REMOVED***
#***REMOVED******REMOVED***

{{## def.compareFormat:
  {{? $isData ***REMOVED******REMOVED***
    if ({{=$schemaValue***REMOVED******REMOVED*** === undefined) {{=$valid***REMOVED******REMOVED*** = true;
    else if (typeof {{=$schemaValue***REMOVED******REMOVED*** != 'string') {{=$valid***REMOVED******REMOVED*** = false;
    else {
    {{ $closingBraces += '***REMOVED***'; ***REMOVED******REMOVED***
  {{?***REMOVED******REMOVED***

  {{? $isDataFormat ***REMOVED******REMOVED***
    if (!{{=$compare***REMOVED******REMOVED***) {{=$valid***REMOVED******REMOVED*** = true;
    else {
    {{ $closingBraces += '***REMOVED***'; ***REMOVED******REMOVED***
  {{?***REMOVED******REMOVED***

  var {{=$result***REMOVED******REMOVED*** = {{=$compare***REMOVED******REMOVED***({{=$data***REMOVED******REMOVED***, {{# def.schemaValueQS ***REMOVED******REMOVED***);

  if ({{=$result***REMOVED******REMOVED*** === undefined) {{=$valid***REMOVED******REMOVED*** = false;
#***REMOVED******REMOVED***


{{? it.opts.format === false ***REMOVED******REMOVED***{{# def.skipFormatLimit ***REMOVED******REMOVED***{{?***REMOVED******REMOVED***

{{
  var $schemaFormat = it.schema.format
    , $isDataFormat = it.opts.$data && $schemaFormat.$data
    , $closingBraces = '';
***REMOVED******REMOVED***

{{? $isDataFormat ***REMOVED******REMOVED***
  {{
    var $schemaValueFormat = it.util.getData($schemaFormat.$data, $dataLvl, it.dataPathArr)
      , $format = 'format' + $lvl
      , $compare = 'compare' + $lvl;
  ***REMOVED******REMOVED***

  var {{=$format***REMOVED******REMOVED*** = formats[{{=$schemaValueFormat***REMOVED******REMOVED***]
    , {{=$compare***REMOVED******REMOVED*** = {{=$format***REMOVED******REMOVED*** && {{=$format***REMOVED******REMOVED***.compare;
{{??***REMOVED******REMOVED***
  {{ var $format = it.formats[$schemaFormat]; ***REMOVED******REMOVED***
  {{? !($format && $format.compare) ***REMOVED******REMOVED***
    {{# def.skipFormatLimit ***REMOVED******REMOVED***
  {{?***REMOVED******REMOVED***
  {{ var $compare = 'formats' + it.util.getProperty($schemaFormat) + '.compare'; ***REMOVED******REMOVED***
{{?***REMOVED******REMOVED***

{{
  var $isMax = $keyword == 'formatMaximum'
    , $exclusiveKeyword = 'formatExclusive' + ($isMax ? 'Maximum' : 'Minimum')
    , $schemaExcl = it.schema[$exclusiveKeyword]
    , $isDataExcl = it.opts.$data && $schemaExcl && $schemaExcl.$data
    , $op = $isMax ? '<' : '>'
    , $result = 'result' + $lvl;
***REMOVED******REMOVED***

{{# def.$data ***REMOVED******REMOVED***


{{? $isDataExcl ***REMOVED******REMOVED***
  {{
    var $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr)
      , $exclusive = 'exclusive' + $lvl
      , $opExpr = 'op' + $lvl
      , $opStr = '\' + ' + $opExpr + ' + \'';
  ***REMOVED******REMOVED***
  var schemaExcl{{=$lvl***REMOVED******REMOVED*** = {{=$schemaValueExcl***REMOVED******REMOVED***;
  {{ $schemaValueExcl = 'schemaExcl' + $lvl; ***REMOVED******REMOVED***

  if (typeof {{=$schemaValueExcl***REMOVED******REMOVED*** != 'boolean' && {{=$schemaValueExcl***REMOVED******REMOVED*** !== undefined) {
    {{=$valid***REMOVED******REMOVED*** = false;
    {{ var $errorKeyword = $exclusiveKeyword; ***REMOVED******REMOVED***
    {{# def.error:'_formatExclusiveLimit' ***REMOVED******REMOVED***
  ***REMOVED***

  {{# def.elseIfValid ***REMOVED******REMOVED***

  {{# def.compareFormat ***REMOVED******REMOVED***
  var {{=$exclusive***REMOVED******REMOVED*** = {{=$schemaValueExcl***REMOVED******REMOVED*** === true;

  if ({{=$valid***REMOVED******REMOVED*** === undefined) {
    {{=$valid***REMOVED******REMOVED*** = {{=$exclusive***REMOVED******REMOVED***
                  ? {{=$result***REMOVED******REMOVED*** {{=$op***REMOVED******REMOVED*** 0
                  : {{=$result***REMOVED******REMOVED*** {{=$op***REMOVED******REMOVED***= 0;
  ***REMOVED***

  if (!{{=$valid***REMOVED******REMOVED***) var op{{=$lvl***REMOVED******REMOVED*** = {{=$exclusive***REMOVED******REMOVED*** ? '{{=$op***REMOVED******REMOVED***' : '{{=$op***REMOVED******REMOVED***=';
{{??***REMOVED******REMOVED***
  {{
    var $exclusive = $schemaExcl === true
      , $opStr = $op;  /*used in error*/
    if (!$exclusive) $opStr += '=';
    var $opExpr = '\'' + $opStr + '\''; /*used in error*/
  ***REMOVED******REMOVED***

  {{# def.compareFormat ***REMOVED******REMOVED***

  if ({{=$valid***REMOVED******REMOVED*** === undefined)
    {{=$valid***REMOVED******REMOVED*** = {{=$result***REMOVED******REMOVED*** {{=$op***REMOVED******REMOVED***{{?!$exclusive***REMOVED******REMOVED***={{?***REMOVED******REMOVED*** 0;
{{?***REMOVED******REMOVED***

{{= $closingBraces ***REMOVED******REMOVED***

if (!{{=$valid***REMOVED******REMOVED***) {
  {{ var $errorKeyword = $keyword; ***REMOVED******REMOVED***
  {{# def.error:'_formatLimit' ***REMOVED******REMOVED***
***REMOVED***

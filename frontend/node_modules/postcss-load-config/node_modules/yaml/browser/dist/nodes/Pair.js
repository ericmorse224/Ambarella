import { createNode ***REMOVED*** from '../doc/createNode.js';
import { stringifyPair ***REMOVED*** from '../stringify/stringifyPair.js';
import { addPairToJSMap ***REMOVED*** from './addPairToJSMap.js';
import { NODE_TYPE, PAIR, isNode ***REMOVED*** from './identity.js';

function createPair(key, value, ctx) {
    const k = createNode(key, undefined, ctx);
    const v = createNode(value, undefined, ctx);
    return new Pair(k, v);
***REMOVED***
class Pair {
    constructor(key, value = null) {
        Object.defineProperty(this, NODE_TYPE, { value: PAIR ***REMOVED***);
        this.key = key;
        this.value = value;
    ***REMOVED***
    clone(schema) {
        let { key, value ***REMOVED*** = this;
        if (isNode(key))
            key = key.clone(schema);
        if (isNode(value))
            value = value.clone(schema);
        return new Pair(key, value);
    ***REMOVED***
    toJSON(_, ctx) {
        const pair = ctx?.mapAsMap ? new Map() : {***REMOVED***;
        return addPairToJSMap(ctx, pair, this);
    ***REMOVED***
    toString(ctx, onComment, onChompKeep) {
        return ctx?.doc
            ? stringifyPair(this, ctx, onComment, onChompKeep)
            : JSON.stringify(this);
    ***REMOVED***
***REMOVED***

export { Pair, createPair ***REMOVED***;

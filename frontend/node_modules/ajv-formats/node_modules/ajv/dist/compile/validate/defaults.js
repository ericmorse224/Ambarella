"use strict";
Object.defineProperty(exports, "__esModule", { value: true ***REMOVED***);
exports.assignDefaults = void 0;
const codegen_1 = require("../codegen");
const util_1 = require("../util");
function assignDefaults(it, ty) {
    const { properties, items ***REMOVED*** = it.schema;
    if (ty === "object" && properties) {
        for (const key in properties) {
            assignDefault(it, key, properties[key].default);
        ***REMOVED***
    ***REMOVED***
    else if (ty === "array" && Array.isArray(items)) {
        items.forEach((sch, i) => assignDefault(it, i, sch.default));
    ***REMOVED***
***REMOVED***
exports.assignDefaults = assignDefaults;
function assignDefault(it, prop, defaultValue) {
    const { gen, compositeRule, data, opts ***REMOVED*** = it;
    if (defaultValue === undefined)
        return;
    const childData = (0, codegen_1._) `${data***REMOVED***${(0, codegen_1.getProperty)(prop)***REMOVED***`;
    if (compositeRule) {
        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData***REMOVED***`);
        return;
    ***REMOVED***
    let condition = (0, codegen_1._) `${childData***REMOVED*** === undefined`;
    if (opts.useDefaults === "empty") {
        condition = (0, codegen_1._) `${condition***REMOVED*** || ${childData***REMOVED*** === null || ${childData***REMOVED*** === ""`;
    ***REMOVED***
    // `${childData***REMOVED*** === undefined` +
    // (opts.useDefaults === "empty" ? ` || ${childData***REMOVED*** === null || ${childData***REMOVED*** === ""` : "")
    gen.if(condition, (0, codegen_1._) `${childData***REMOVED*** = ${(0, codegen_1.stringify)(defaultValue)***REMOVED***`);
***REMOVED***
//# sourceMappingURL=defaults.js.map
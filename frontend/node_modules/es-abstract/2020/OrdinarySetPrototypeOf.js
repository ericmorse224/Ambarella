'use strict';

var $TypeError = require('es-errors/type');
var $setProto = require('set-proto');

var OrdinaryGetPrototypeOf = require('./OrdinaryGetPrototypeOf');

var isObject = require('../helpers/isObject');

// https://262.ecma-international.org/7.0/#sec-ordinarysetprototypeof

module.exports = function OrdinarySetPrototypeOf(O, V) {
	if (V !== null && !isObject(V)) {
		throw new $TypeError('Assertion failed: V must be Object or Null');
	***REMOVED***
	/*
	var extensible = IsExtensible(O);
	var current = OrdinaryGetPrototypeOf(O);
	if (SameValue(V, current)) {
		return true;
	***REMOVED***
	if (!extensible) {
		return false;
	***REMOVED***
	*/
	try {
		$setProto(O, V);
	***REMOVED*** catch (e) {
		return false;
	***REMOVED***
	return OrdinaryGetPrototypeOf(O) === V;
	/*
	var p = V;
	var done = false;
	while (!done) {
		if (p === null) {
			done = true;
		***REMOVED*** else if (SameValue(p, O)) {
			return false;
		***REMOVED*** else {
			if (wat) {
				done = true;
			***REMOVED*** else {
				p = p.[[Prototype]];
			***REMOVED***
		***REMOVED***
	***REMOVED***
	O.[[Prototype]] = V;
	return true;
	*/
***REMOVED***;

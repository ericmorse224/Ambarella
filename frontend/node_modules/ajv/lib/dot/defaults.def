{{## def.assignDefault:
  {{? it.compositeRule ***REMOVED******REMOVED***
    {{
      if (it.opts.strictDefaults) {
        var $defaultMsg = 'default is ignored for: ' + $passData;
        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);
        else throw new Error($defaultMsg);
      ***REMOVED***
    ***REMOVED******REMOVED***
  {{??***REMOVED******REMOVED***
    if ({{=$passData***REMOVED******REMOVED*** === undefined
      {{? it.opts.useDefaults == 'empty' ***REMOVED******REMOVED***
        || {{=$passData***REMOVED******REMOVED*** === null
        || {{=$passData***REMOVED******REMOVED*** === ''
      {{?***REMOVED******REMOVED***
    )
      {{=$passData***REMOVED******REMOVED*** = {{? it.opts.useDefaults == 'shared' ***REMOVED******REMOVED***
                         {{= it.useDefault($sch.default) ***REMOVED******REMOVED***
                       {{??***REMOVED******REMOVED***
                         {{= JSON.stringify($sch.default) ***REMOVED******REMOVED***
                       {{?***REMOVED******REMOVED***;
  {{?***REMOVED******REMOVED***
#***REMOVED******REMOVED***


{{## def.defaultProperties:
  {{
    var $schema = it.schema.properties
      , $schemaKeys = Object.keys($schema); ***REMOVED******REMOVED***
  {{~ $schemaKeys:$propertyKey ***REMOVED******REMOVED***
    {{ var $sch = $schema[$propertyKey]; ***REMOVED******REMOVED***
    {{? $sch.default !== undefined ***REMOVED******REMOVED***
      {{ var $passData = $data + it.util.getProperty($propertyKey); ***REMOVED******REMOVED***
      {{# def.assignDefault ***REMOVED******REMOVED***
    {{?***REMOVED******REMOVED***
  {{~***REMOVED******REMOVED***
#***REMOVED******REMOVED***


{{## def.defaultItems:
  {{~ it.schema.items:$sch:$i ***REMOVED******REMOVED***
    {{? $sch.default !== undefined ***REMOVED******REMOVED***
      {{ var $passData = $data + '[' + $i + ']'; ***REMOVED******REMOVED***
      {{# def.assignDefault ***REMOVED******REMOVED***
    {{?***REMOVED******REMOVED***
  {{~***REMOVED******REMOVED***
#***REMOVED******REMOVED***

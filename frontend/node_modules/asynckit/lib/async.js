var defer = require('./defer.js');

// API
module.exports = async;

/**
 * Runs provided callback asynchronously
 * even if callback itself is not
 *
 * @param   {function***REMOVED*** callback - callback to invoke
 * @returns {function***REMOVED*** - augmented callback
 */
function async(callback)
{
  var isAsync = false;

  // check if async happened
  defer(function() { isAsync = true; ***REMOVED***);

  return function async_callback(err, result)
  {
    if (isAsync)
    {
      callback(err, result);
    ***REMOVED***
    else
    {
      defer(function nextTick_callback()
      {
        callback(err, result);
      ***REMOVED***);
    ***REMOVED***
  ***REMOVED***;
***REMOVED***

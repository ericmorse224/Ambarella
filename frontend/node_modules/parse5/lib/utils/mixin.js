'use strict';

class Mixin {
    constructor(host) {
        const originalMethods = {***REMOVED***;
        const overriddenMethods = this._getOverriddenMethods(this, originalMethods);

        for (const key of Object.keys(overriddenMethods)) {
            if (typeof overriddenMethods[key] === 'function') {
                originalMethods[key] = host[key];
                host[key] = overriddenMethods[key];
            ***REMOVED***
        ***REMOVED***
    ***REMOVED***

    _getOverriddenMethods() {
        throw new Error('Not implemented');
    ***REMOVED***
***REMOVED***

Mixin.install = function(host, Ctor, opts) {
    if (!host.__mixins) {
        host.__mixins = [];
    ***REMOVED***

    for (let i = 0; i < host.__mixins.length; i++) {
        if (host.__mixins[i].constructor === Ctor) {
            return host.__mixins[i];
        ***REMOVED***
    ***REMOVED***

    const mixin = new Ctor(host, opts);

    host.__mixins.push(mixin);

    return mixin;
***REMOVED***;

module.exports = Mixin;

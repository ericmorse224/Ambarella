'use strict';
const aliases = ['stdin', 'stdout', 'stderr'];

const hasAlias = options => aliases.some(alias => options[alias] !== undefined);

const normalizeStdio = options => {
	if (!options) {
		return;
	***REMOVED***

	const {stdio***REMOVED*** = options;

	if (stdio === undefined) {
		return aliases.map(alias => options[alias]);
	***REMOVED***

	if (hasAlias(options)) {
		throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${aliases.map(alias => `\`${alias***REMOVED***\``).join(', ')***REMOVED***`);
	***REMOVED***

	if (typeof stdio === 'string') {
		return stdio;
	***REMOVED***

	if (!Array.isArray(stdio)) {
		throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof stdio***REMOVED***\``);
	***REMOVED***

	const length = Math.max(stdio.length, aliases.length);
	return Array.from({length***REMOVED***, (value, index) => stdio[index]);
***REMOVED***;

module.exports = normalizeStdio;

// `ipc` is pushed unless it is already present
module.exports.node = options => {
	const stdio = normalizeStdio(options);

	if (stdio === 'ipc') {
		return 'ipc';
	***REMOVED***

	if (stdio === undefined || typeof stdio === 'string') {
		return [stdio, stdio, stdio, 'ipc'];
	***REMOVED***

	if (stdio.includes('ipc')) {
		return stdio;
	***REMOVED***

	return [...stdio, 'ipc'];
***REMOVED***;

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/

"use strict";

/** @typedef {import("./Dependency").DependencyLocation***REMOVED*** DependencyLocation */
/** @typedef {import("./Dependency").SourcePosition***REMOVED*** SourcePosition */

/**
 * @param {SourcePosition***REMOVED*** pos position
 * @returns {string***REMOVED*** formatted position
 */
const formatPosition = pos => {
	if (pos && typeof pos === "object") {
		if ("line" in pos && "column" in pos) {
			return `${pos.line***REMOVED***:${pos.column***REMOVED***`;
		***REMOVED*** else if ("line" in pos) {
			return `${pos.line***REMOVED***:?`;
		***REMOVED***
	***REMOVED***
	return "";
***REMOVED***;

/**
 * @param {DependencyLocation***REMOVED*** loc location
 * @returns {string***REMOVED*** formatted location
 */
const formatLocation = loc => {
	if (loc && typeof loc === "object") {
		if ("start" in loc && loc.start && "end" in loc && loc.end) {
			if (
				typeof loc.start === "object" &&
				typeof loc.start.line === "number" &&
				typeof loc.end === "object" &&
				typeof loc.end.line === "number" &&
				typeof loc.end.column === "number" &&
				loc.start.line === loc.end.line
			) {
				return `${formatPosition(loc.start)***REMOVED***-${loc.end.column***REMOVED***`;
			***REMOVED*** else if (
				typeof loc.start === "object" &&
				typeof loc.start.line === "number" &&
				typeof loc.start.column !== "number" &&
				typeof loc.end === "object" &&
				typeof loc.end.line === "number" &&
				typeof loc.end.column !== "number"
			) {
				return `${loc.start.line***REMOVED***-${loc.end.line***REMOVED***`;
			***REMOVED***
			return `${formatPosition(loc.start)***REMOVED***-${formatPosition(loc.end)***REMOVED***`;
		***REMOVED***
		if ("start" in loc && loc.start) {
			return formatPosition(loc.start);
		***REMOVED***
		if ("name" in loc && "index" in loc) {
			return `${loc.name***REMOVED***[${loc.index***REMOVED***]`;
		***REMOVED***
		if ("name" in loc) {
			return loc.name;
		***REMOVED***
	***REMOVED***
	return "";
***REMOVED***;

module.exports = formatLocation;

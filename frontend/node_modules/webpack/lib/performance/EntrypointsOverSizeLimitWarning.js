/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Sean Larkin @thelarkinn
*/

"use strict";

const { formatSize ***REMOVED*** = require("../SizeFormatHelpers");
const WebpackError = require("../WebpackError");

/** @typedef {import("./SizeLimitsPlugin").EntrypointDetails***REMOVED*** EntrypointDetails */

module.exports = class EntrypointsOverSizeLimitWarning extends WebpackError {
	/**
	 * @param {EntrypointDetails[]***REMOVED*** entrypoints the entrypoints
	 * @param {number***REMOVED*** entrypointLimit the size limit
	 */
	constructor(entrypoints, entrypointLimit) {
		const entrypointList = entrypoints
			.map(
				entrypoint =>
					`\n  ${entrypoint.name***REMOVED*** (${formatSize(
						entrypoint.size
					)***REMOVED***)\n${entrypoint.files.map(asset => `      ${asset***REMOVED***`).join("\n")***REMOVED***`
			)
			.join("");
		super(`entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (${formatSize(
			entrypointLimit
		)***REMOVED***). This can impact web performance.
Entrypoints:${entrypointList***REMOVED***\n`);

		this.name = "EntrypointsOverSizeLimitWarning";
		this.entrypoints = entrypoints;
	***REMOVED***
***REMOVED***;

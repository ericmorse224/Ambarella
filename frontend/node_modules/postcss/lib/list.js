'use strict'

let list = {
  comma(string) {
    return list.split(string, [','], true)
  ***REMOVED***,

  space(string) {
    let spaces = [' ', '\n', '\t']
    return list.split(string, spaces)
  ***REMOVED***,

  split(string, separators, last) {
    let array = []
    let current = ''
    let split = false

    let func = 0
    let inQuote = false
    let prevQuote = ''
    let escape = false

    for (let letter of string) {
      if (escape) {
        escape = false
      ***REMOVED*** else if (letter === '\\') {
        escape = true
      ***REMOVED*** else if (inQuote) {
        if (letter === prevQuote) {
          inQuote = false
        ***REMOVED***
      ***REMOVED*** else if (letter === '"' || letter === "'") {
        inQuote = true
        prevQuote = letter
      ***REMOVED*** else if (letter === '(') {
        func += 1
      ***REMOVED*** else if (letter === ')') {
        if (func > 0) func -= 1
      ***REMOVED*** else if (func === 0) {
        if (separators.includes(letter)) split = true
      ***REMOVED***

      if (split) {
        if (current !== '') array.push(current.trim())
        current = ''
        split = false
      ***REMOVED*** else {
        current += letter
      ***REMOVED***
    ***REMOVED***

    if (last || current !== '') array.push(current.trim())
    return array
  ***REMOVED***
***REMOVED***

module.exports = list
list.default = list

'use strict';

var toStr = Object.prototype.toString;

var isPrimitive = require('./helpers/isPrimitive');

var isCallable = require('is-callable');

/** @type {{ [k in `[[${string***REMOVED***]]`]: (O: { toString?: unknown, valueOf?: unknown ***REMOVED***, actualHint?: StringConstructor | NumberConstructor) => null | undefined | string | symbol | number | boolean | bigint; ***REMOVED******REMOVED*** */
// http://ecma-international.org/ecma-262/5.1/#sec-8.12.8
var ES5internalSlots = {
	'[[DefaultValue]]': function (O) {
		var actualHint;
		if (arguments.length > 1) {
			actualHint = arguments[1];
		***REMOVED*** else {
			actualHint = toStr.call(O) === '[object Date]' ? String : Number;
		***REMOVED***

		if (actualHint === String || actualHint === Number) {
			/** @type {('toString' | 'valueOf')[]***REMOVED*** */
			var methods = actualHint === String ? ['toString', 'valueOf'] : ['valueOf', 'toString'];
			var value, i;
			for (i = 0; i < methods.length; ++i) {
				var method = methods[i];
				if (isCallable(O[method])) {
					// eslint-disable-next-line no-extra-parens
					value = /** @type {Function***REMOVED*** */ (O[method])();
					if (isPrimitive(value)) {
						return value;
					***REMOVED***
				***REMOVED***
			***REMOVED***
			throw new TypeError('No default value');
		***REMOVED***
		throw new TypeError('invalid [[DefaultValue]] hint supplied');
	***REMOVED***
***REMOVED***;

/** @type {import('./es5')***REMOVED*** */
// http://ecma-international.org/ecma-262/5.1/#sec-9.1
module.exports = function ToPrimitive(input) {
	if (isPrimitive(input)) {
		return input;
	***REMOVED***
	if (arguments.length > 1) {
		// eslint-disable-next-line no-extra-parens
		return ES5internalSlots['[[DefaultValue]]'](/** @type {object***REMOVED*** */ (input), arguments[1]);
	***REMOVED***
	// eslint-disable-next-line no-extra-parens
	return ES5internalSlots['[[DefaultValue]]'](/** @type {object***REMOVED*** */ (input));
***REMOVED***;

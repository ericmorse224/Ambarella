"use strict";
Object.defineProperty(exports, "__esModule", { value: true ***REMOVED***);
const codegen_1 = require("../../compile/codegen");
const util_1 = require("../../compile/util");
const error = {
    message: ({ params: { len ***REMOVED*** ***REMOVED***) => (0, codegen_1.str) `must NOT have more than ${len***REMOVED*** items`,
    params: ({ params: { len ***REMOVED*** ***REMOVED***) => (0, codegen_1._) `{limit: ${len***REMOVED******REMOVED***`,
***REMOVED***;
const def = {
    keyword: "unevaluatedItems",
    type: "array",
    schemaType: ["boolean", "object"],
    error,
    code(cxt) {
        const { gen, schema, data, it ***REMOVED*** = cxt;
        const items = it.items || 0;
        if (items === true)
            return;
        const len = gen.const("len", (0, codegen_1._) `${data***REMOVED***.length`);
        if (schema === false) {
            cxt.setParams({ len: items ***REMOVED***);
            cxt.fail((0, codegen_1._) `${len***REMOVED*** > ${items***REMOVED***`);
        ***REMOVED***
        else if (typeof schema == "object" && !(0, util_1.alwaysValidSchema)(it, schema)) {
            const valid = gen.var("valid", (0, codegen_1._) `${len***REMOVED*** <= ${items***REMOVED***`);
            gen.if((0, codegen_1.not)(valid), () => validateItems(valid, items));
            cxt.ok(valid);
        ***REMOVED***
        it.items = true;
        function validateItems(valid, from) {
            gen.forRange("i", from, len, (i) => {
                cxt.subschema({ keyword: "unevaluatedItems", dataProp: i, dataPropType: util_1.Type.Num ***REMOVED***, valid);
                if (!it.allErrors)
                    gen.if((0, codegen_1.not)(valid), () => gen.break());
            ***REMOVED***);
        ***REMOVED***
    ***REMOVED***,
***REMOVED***;
exports.default = def;
//# sourceMappingURL=unevaluatedItems.js.map
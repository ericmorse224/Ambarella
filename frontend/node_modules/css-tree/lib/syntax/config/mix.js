var hasOwnProperty = Object.prototype.hasOwnProperty;
var shape = {
    generic: true,
    types: {***REMOVED***,
    properties: {***REMOVED***,
    parseContext: {***REMOVED***,
    scope: {***REMOVED***,
    atrule: ['parse'],
    pseudo: ['parse'],
    node: ['name', 'structure', 'parse', 'generate', 'walkContext']
***REMOVED***;

function isObject(value) {
    return value && value.constructor === Object;
***REMOVED***

function copy(value) {
    if (isObject(value)) {
        var res = {***REMOVED***;
        for (var key in value) {
            if (hasOwnProperty.call(value, key)) {
                res[key] = value[key];
            ***REMOVED***
        ***REMOVED***
        return res;
    ***REMOVED*** else {
        return value;
    ***REMOVED***
***REMOVED***

function extend(dest, src) {
    for (var key in src) {
        if (hasOwnProperty.call(src, key)) {
            if (isObject(dest[key])) {
                extend(dest[key], copy(src[key]));
            ***REMOVED*** else {
                dest[key] = copy(src[key]);
            ***REMOVED***
        ***REMOVED***
    ***REMOVED***
***REMOVED***

function mix(dest, src, shape) {
    for (var key in shape) {
        if (hasOwnProperty.call(shape, key) === false) {
            continue;
        ***REMOVED***

        if (shape[key] === true) {
            if (key in src) {
                if (hasOwnProperty.call(src, key)) {
                    dest[key] = copy(src[key]);
                ***REMOVED***
            ***REMOVED***
        ***REMOVED*** else if (shape[key]) {
            if (isObject(shape[key])) {
                var res = {***REMOVED***;
                extend(res, dest[key]);
                extend(res, src[key]);
                dest[key] = res;
            ***REMOVED*** else if (Array.isArray(shape[key])) {
                var res = {***REMOVED***;
                var innerShape = shape[key].reduce(function(s, k) {
                    s[k] = true;
                    return s;
                ***REMOVED***, {***REMOVED***);
                for (var name in dest[key]) {
                    if (hasOwnProperty.call(dest[key], name)) {
                        res[name] = {***REMOVED***;
                        if (dest[key] && dest[key][name]) {
                            mix(res[name], dest[key][name], innerShape);
                        ***REMOVED***
                    ***REMOVED***
                ***REMOVED***
                for (var name in src[key]) {
                    if (hasOwnProperty.call(src[key], name)) {
                        if (!res[name]) {
                            res[name] = {***REMOVED***;
                        ***REMOVED***
                        if (src[key] && src[key][name]) {
                            mix(res[name], src[key][name], innerShape);
                        ***REMOVED***
                    ***REMOVED***
                ***REMOVED***
                dest[key] = res;
            ***REMOVED***
        ***REMOVED***
    ***REMOVED***
    return dest;
***REMOVED***

module.exports = function(dest, src) {
    return mix(dest, src, shape);
***REMOVED***;

"use strict";

/** @typedef {import("./index.js").MinimizedResult***REMOVED*** MinimizedResult */
/** @typedef {import("./index.js").CustomOptions***REMOVED*** CustomOptions */

/**
 * @template T
 * @param {import("./index.js").InternalOptions<T>***REMOVED*** options
 * @returns {Promise<MinimizedResult>***REMOVED***
 */
async function minify(options) {
  const {
    name,
    input,
    inputSourceMap,
    extractComments
  ***REMOVED*** = options;
  const {
    implementation,
    options: minimizerOptions
  ***REMOVED*** = options.minimizer;
  return implementation({
    [name]: input
  ***REMOVED***, inputSourceMap, minimizerOptions, extractComments);
***REMOVED***

/**
 * @param {string***REMOVED*** options
 * @returns {Promise<MinimizedResult>***REMOVED***
 */
async function transform(options) {
  // 'use strict' => this === undefined (Clean Scope)
  // Safer for possible security issues, albeit not critical at all here
  // eslint-disable-next-line no-param-reassign
  const evaluatedOptions =
  /**
   * @template T
   * @type {import("./index.js").InternalOptions<T>***REMOVED***
   * */

  // eslint-disable-next-line no-new-func
  new Function("exports", "require", "module", "__filename", "__dirname", `'use strict'\nreturn ${options***REMOVED***`)(exports, require, module, __filename, __dirname);
  return minify(evaluatedOptions);
***REMOVED***
module.exports = {
  minify,
  transform
***REMOVED***;
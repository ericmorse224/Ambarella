import fs from 'fs'
import path from 'path'

const defaultConfigFiles = [
  './tailwind.config.js',
  './tailwind.config.cjs',
  './tailwind.config.mjs',
  './tailwind.config.ts',
  './tailwind.config.cts',
  './tailwind.config.mts',
]

function isObject(value) {
  return typeof value === 'object' && value !== null
***REMOVED***

function isEmpty(obj) {
  return Object.keys(obj).length === 0
***REMOVED***

function isString(value) {
  return typeof value === 'string' || value instanceof String
***REMOVED***

export default function resolveConfigPath(pathOrConfig) {
  // require('tailwindcss')({ theme: ..., variants: ... ***REMOVED***)
  if (isObject(pathOrConfig) && pathOrConfig.config === undefined && !isEmpty(pathOrConfig)) {
    return null
  ***REMOVED***

  // require('tailwindcss')({ config: 'custom-config.js' ***REMOVED***)
  if (
    isObject(pathOrConfig) &&
    pathOrConfig.config !== undefined &&
    isString(pathOrConfig.config)
  ) {
    return path.resolve(pathOrConfig.config)
  ***REMOVED***

  // require('tailwindcss')({ config: { theme: ..., variants: ... ***REMOVED*** ***REMOVED***)
  if (
    isObject(pathOrConfig) &&
    pathOrConfig.config !== undefined &&
    isObject(pathOrConfig.config)
  ) {
    return null
  ***REMOVED***

  // require('tailwindcss')('custom-config.js')
  if (isString(pathOrConfig)) {
    return path.resolve(pathOrConfig)
  ***REMOVED***

  // require('tailwindcss')
  return resolveDefaultConfigPath()
***REMOVED***

export function resolveDefaultConfigPath() {
  for (const configFile of defaultConfigFiles) {
    try {
      const configPath = path.resolve(configFile)
      fs.accessSync(configPath)
      return configPath
    ***REMOVED*** catch (err) {***REMOVED***
  ***REMOVED***

  return null
***REMOVED***
